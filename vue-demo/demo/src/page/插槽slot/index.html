<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue入门之插槽slot</title>
  <!-- 开发环境版本，包含了有帮助的命令行警告 -->
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <style>
    .component {
      width: 345px;
      display: flex;
      align-items: center;
      flex-direction: column;
    }

    .header {
      padding: 26px;
      color: #008B8B;
      background-color: #7FFFD4;
    }

    .main {
      padding: 26px;
      color: #228B22;
      background-color: #8FBC8F;
    }

    .footer {
      padding: 26px;
      color: #FFA500;
      background-color: #F5F5DC;
    }
  </style>
</head>

<body>
  <!-- 插槽就是子组件中的提供给父组件使用的一个占位符，用<slot></slot> 表示，父组件可以在这个占位符中填充任何模板代码，如 HTML、组件等，填充的内容会替换子组件的<slot></slot>标签。 -->
  <!-- slot 其实就是提前占坑，把坑留着，想种萝卜还是白菜随你 -->
  <div id="app">
    <!-- 插槽，也就是slot，是组件的一块HTML模板，一个slot最核心的两个问题是显示不显示和怎样显示 -->
    <!-- 1、单个slot -->
    <!-- 单个插槽，别名默认插槽、匿名插槽，不用设置name属性 -->
    <children1>
      <!-- （1-A）. 在父组件中给这个占位符填充内容： -->
      <div>多云，最高气温34度，最低气温28度，微风</div>
    </children1>

    <!--(2) 现在来看看，如果子组件中没有放插槽，同样的父组件中在子组件中填充内容，会是啥样的： -->
    <children2>
      <!-- (2-A). 父组件照常填充内容： -->
      <div>多云，最高气温34度，最低气温28度，微风</div>
      <!-- 总结：如果子组件没有使用插槽，父组件如果需要往子组件中填充模板或者html, 是没法做到的 -->
    </children2>

    <!-- 3、具名slot -->
    <!-- 插槽的使用 - 具名插槽 -->
    <!-- 描述：具名插槽其实就是给插槽娶个名字。一个子组件可以放多个插槽，而且可以放在不同的地方，而父组件填充内容时，可以根据这个名字把内容填充到对应插槽中。 -->
    <!-- 如下代码：  -->
    <children3 v-bind:htitle="headerObj">
      <!-- 3 . 父组件填充内容, 父组件通过 v-slot:[name] 的方式指定到对应的插槽中 -->
      <!-- 接下来再来看看，父组件中填充内容的时候，顺序调换下，看下能不能内容能不能对应上： -->
      <!-- 1. 子组件代码不变，父组件代码中填充顺序调换下( 在父组件中，footer 和 header 的填充位置对换)：  -->
      <!-- 总结： 由此看出，即使父组件对插槽的填充的顺序打乱，只要名字对应上了，就可以正确渲染到对应的插槽中。即： 父组件填充内容时，是可以根据这个名字把内容填充到对应插槽中的 -->
      <template v-slot:footer>
        <h1>我是页尾的具体内容</h1>
      </template>
      <!-- 获取slot上面的值 --> 
        <!-- #header表示对应header插槽，后面的参数表示调用子组件slot1内部的参数的形式  -->
        <!-- #header==  v-slot:header  v-slot:简写 #-->
      <template v-slot:header='slotProps'>
        <!-- <template #header='slotProps'> -->
        <h1>{{slotProps.htitle.headermain}}</h1> 
        <!-- <h1>我是页头的具体内容</h1> -->
      </template>
      <!-- 插槽的使用 - 默认插槽 -->
      <!-- 描述： 默认插槽就是指没有名字的插槽，子组件未定义的名字的插槽，父级将会把 未指定插槽的填充的内容填充到默认插槽中。 -->
      <template>
        <h1>我是默认插槽具体内容</h1>
      </template>
      <!-- 注意： -->
      <!-- 1.  父级的填充内容如果指定到子组件的没有对应名字插槽，那么该内容不会被填充到默认插槽中。-->

      <!-- 2.  如果子组件没有默认插槽，而父级的填充内容指定到默认插槽中，那么该内容就“不会”填充到子组件的任何一个插槽中。 -->

      <!-- 3.  如果子组件有多个默认插槽，而父组件所有指定到默认插槽的填充内容，将“会” “全都”填充到子组件的每个默认插槽中。  -->
    </children3>


    <!-- 　4、插槽的使用 - 作用域插槽 -->
    <!-- 描述：作用域插槽其实就是带数据的插槽，即带参数的插槽，简单的来说就是子组件提供给父组件的参数，该参数仅限于插槽中使用，父组件可根据子组件传过来的插槽数据来进行不同的方式展现和填充插槽内容。 -->
    <!-- 使用方法: -->
    <!-- 子组件存放一个带数据的插槽:  obj 是子组件传给父组件的参数 -->
    <!-- 父组件通过 “slot-scope” 来接收子组件传过来的插槽数据，再根据插槽数据来填充插槽的内容 -->
    <tb-list v-bind:objdata="obj">
      <!-- 获取slot上面的值 -->
      <template slot-scope="dataA">
        <p>索引：{{JSON.stringify(dataA)}}</p>
        <p>索引：{{dataA.$index}}</p>
        <p>姓名：{{dataA.row.name}}</p>
        <p>年龄: {{dataA.row.age}}</p>
        <p>性别: {{dataA.row.sex}}</p>
      </template>
    </tb-list>

  </div>
</body>
<script>
  var app = new Vue({
    el: '#app',
    data: {
      header: '标题AAA',
      message: 'hello',
      obj: [{
        name: 'kongzhi1',
        age: '29',
        sex: 'man'
      },
      {
        name: '张三',
        age: '20',
        sex: 'man'
      }
    ],
    headerObj:{
      headerTitle:'我是页头标题',
      headermain:'我是页头的具体内容',
    },
  
    },
    methods: {
      tobeknow: function () {
        console.log("It is the parent's method");
      }
    },
    components: {
      // 单个slot
      children1: {
        // （1-b）. 在子组件中放一个占位符 slot
        template: '<button><h1>今天天气情况</h1>\<slot></slot></button>'
      },
      children2: {
        // （2-b）. 子组件代码无插槽： -->
        template: '<button><h1>今天天气情况</h1></button>'
      },
      // 具名slot
      children3: {
        // <!-- 1. 子组件的代码，设置了两个插槽(header和footer)： 
        template: '<div class="component">\
                <div class="header">\
                  <!--<h1>我是页头标题</h1>--> \
                  <h1>{{htitle.headerTitle}}</h1>\
                  <div>\
                    <!-- 这里存放页头的具体内容  <!-- 将 `htitle` 对象作为一个插槽的 prop 传入 -->\
                    <slot name="header"  v-bind:htitle="htitle"></slot>\
                  </div>\
                </div>\
                <div class="main">\
                  <h1>我是默认插槽标题1</h1>\
                  <slot></slot>\
                  </div>\
                  <div class="main">\
                  <h1>我是默认插槽标题2</h1>\
                  <slot></slot>\
                  </div>\
                <div class="footer">\
                  <h1>我是页尾标题</h1>\
                  <!-- 这里存放页尾的具体内容-->\
                    <slot name="footer"></slot>\
                </div>\
            </div>',
             // 获取值
        props: ['htitle']
      },
      // 作用域slot
      'tb-list': {
        template: `<ul>
                        <li v-for="(item, index) in objdata">
                            <slot :row="item" :$index="index"></slot>
                        </li>
                    </ul>`,
        // 获取值
        props: ['objdata']
      }

    }


  });
</script>

</html>