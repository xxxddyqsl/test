<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #app {
            width: 1080px;
            height: 680px;
            position: relative;
            border: 1px solid blue;
            overflow: hidden;
        }

        ul {
            position: absolute;
            /* left: -100%; */
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            /* justify-content: flex-start; */
            list-style: none;
            flex-wrap: wrap;
            /* flex-direction: column; */
        }

        li {
            height: 50%;
            width: 50%;
            background-color: tan;
        }

        li:nth-child(odd) {
            background-color: thistle;
        }

        .Bisector-list-item-stream {
            width: 200px;
            height: 200px;
        }
    </style>

</head>

<body ng-app='APP'>
    <div id="app" ng-controller='myCtrl'>
        <ul>
            <!-- <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li> -->
        </ul>


    </div>
    <!-- <iframe src="https://webrtc.github.io/samples/src/content/getusermedia/getdisplaymedia/" frameborder="0"></iframe> -->
    <button id="next">下一张</button>
    <button id="last">上一张</button>
    <button ng-click='onsetStream'>关闭打开摄像头</button>
</body>
<script src="https://cdn.staticfile.org/angular.js/1.4.6/angular.min.js"></script>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
    var app = angular.module('APP', []);
    app.controller('myCtrl', ['$scope', function ($scope) {
        $scope.getClick = function ($event) {
            alert(111);
        }
        // 关闭打开摄像头
        $scope.onsetStream = function () {

        }
    }]);
    function getlog() {
        alert(11)
        
        $.ajax({
            type: "get",//必须是get请求
            url: "http://log.woniu.com/query",
            data: {},
            dataType: "jsonp",//请求的数据类型
            jsonp: "callback",//请求类型是回调
            // jsonpCallback: "callbackFunction",//数据请求成功时回调的方法
            success: function (response) {
            console.log(response);
            },error:function(err){
                console.log(err)
            }
        });
        
    }
    window.onload = async () => {
        getlog()
        //    let arr=[1,2,3,4,5,6,7,8,9];
        let stream = await getLocalStream();
        console.log(stream)
        var arr = [
            { id: 'a1', name: '小明1', age: 20, stream: stream },
            { id: 'b', name: '小红2', age: 21 },
            { id: 'c', name: '小军3', age: 22, stream: stream },
            { id: 'd', name: '小王4', age: 23 },
            { id: 'e', name: '小朱5', age: 24, stream: stream },
            // { name: '小刘6', age: 25 },
            // { name: '小张', age: 26 },
            // { name: '小庞', age: 27 },
            // { name: '小米', age: 28 },
            // { name: '小华', age: 29 },
            // { name: '小郑', age: 30 },
            // { name: '小蓝', age: 31 },
            // { name: '小绿', age: 32 },
            // { name: '小青', age: 33 },
            // { name: '小白', age: 34 },
            // { name: '小黑', age: 35 },
            // { name: '小橙', age: 36 },
            // { name: '小紫', age: 37 },
            // { name: '小山', age: 38 },
            // { name: '小一', age: 39 },
            // { name: '小鹏', age: 40 },
            // { name: '小丛', age: 41 },
            // { name: '小鱼', age: 42 },
            // { name: '小李', age: 43 },
            // { name: '小英', age: 44 },
            // { name: '小杰', age: 45 },
            // { name: '小金', age: 46 },
            // { name: '小窗', age: 47 },
            // { name: '小叶', age: 48 },
            // { name: '小文', age: 49 },
            // { name: '小龙', age: 50 },
            // { name: '小纯', age: 51 },
            // { name: '小伟', age: 52 },
            // { name: '小佳', age: 53 },
            // { name: '小吴', age: 54 },
            // { name: '小枚', age: 55 },
            // { name: '小原', age: 56 },
            // { name: '小书', age: 57 },
            // { name: '小江', age: 58 },
            // { name: '小砚', age: 59 },
            // { name: '小然', age: 60 }
        ];

        let x = 0;
        if (arr.length > 4) {
            var newdata = dataHandling([], 4, arr);
            console.log(newdata);
            console.log(newdata[x])
            // html(newdata[x]);
            demo(newdata[x])
        } else {
            demo(arr)
            // html(arr);
        }

        //    下一页
        $('#next').click(function () {
            if (x >= (newdata.length - 1)) {
                // x = newdata.length;
                alert('已至尾页');
            } else {
                x++;
                console.log(newdata[x])
            }
            demo(newdata[x])
        });
        //    上一页
        $('#last').click(function () {
            if (x <= 0) {
                x = 0;
                alert('已至首页');
            } else {
                x--
                console.log(newdata[x])
            }
            demo(newdata[x])

        });
    }
    function demo(data) {
        var oUl = document.getElementById('app').getElementsByTagName('ul')[0];
        // 清空子元素
        oUl.innerHTML = "";
        console.log(data);
        data.forEach(function (item) {
            console.log(item)
            let node = document.createElement("li");
            node.setAttribute("ng-click", 'getClick($event)');// 绑定点击事件
            let nodeV = document.createElement("video");
            nodeV.id = item.id;
            nodeV.className = 'Bisector-list-item-stream';
            nodeV.innerHTML = item.name;
            if (item.stream) {
                nodeV.autoplay = true;
                // 兼容写法：
                try {
                    nodeV.srcObject = item.stream;
                } catch (e) {
                    nodeV.src = window.URL.createObjectURL(stream);
                }
            }
            node.appendChild(nodeV);
            oUl.appendChild(node)
        })
        // $('#app').find('ul').html(h);
    }
    function html(data) {
        $('#app').find('ul').html();
        let h = "";
        data.forEach(function (item) {
            //   attachMediaStream = function (id,stream) {
            // 	element.srcObject = stream;
            // 	return element;
            //     };
            // console.log(item.stream)
            h += `<li>${item.name}
                <video class="Bisector-list-item-stream"  id='${item.id}'></video>
                </li> `;

        })
        console.log(h)
        $('#app').find('ul').html(h);
        data.forEach(function (item) {
            if (item.stream) {
                console.log(item.stream)
                let node = document.getElementById(item.id);
                node.autoplay = true;
                console.log(node)
                node.srcObject = item.stream;
            }
        })
    }
    //    切割数组对象 翻页使用
    function dataHandling(newArr, numb, arr) {
        newArr = [];
        let arrLength = arr.length; // 数组长度
        let num = numb;  // 每页显示 10 条
        let index = 0;
        for (let i = 0; i < arrLength; i++) {
            if (i % num === 0 && i !== 0) { // 可以被 10 整除
                newArr.push(arr.slice(index, i));
                index = i;
            };
            if ((i + 1) === arrLength) {
                newArr.push(arr.slice(index, (i + 1)));
            }
        };
        return newArr;
        //    console.log(newArr)
    }
    function getLocalStream() {
        // var constraints =  { video:{width:  {  min: w , ideal: w , max: w }, height:  { min: h , ideal: h , max: h },   frameRate: 2000, }, audio: true };
        return new Promise(function (resolve) {
            // 获取本地的 视频数据和音频数据
            navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {
                resolve(stream);
            }).catch(Error => {
                console.log(Error);
            });
        })
    }
</script>

</html>






header:before {
	height: auto;
	background: transparent;
}

header .container_box {
	padding: 0 15px;
}

.header .container_box .logo {
	width: 55px;
	height: 52px;
	margin-top: 18px;
}

.header .container_box .show_menu {
	margin-top: 37px;
	width: 24px;
	height: 14px;
}
/* .fab, .far{
	font-size:18px;
} */
.nav_box {
	flex: 1;
	position: relative;
}

#nav {
	position: absolute;
	margin-top: 29.1%;
/* 	display: flex; */
	display: none;
	justify-content: space-around;
	flex-wrap: wrap;
}

/*  {*iphone5 - ipad} */
@media (min-width: 320px)and (max-width: 812px) {
	#nav {
		margin-top: 47.1%;
	}

	/* 横屏距顶	 */
	.horizontal_box .container_box #nav {
		margin-top: 43.1%;
	}
}

@media (max-width: 594px) {
	#nav_horizontal span {
		padding: 0 !important;
	}
}

#nav a span {
	margin-left: 0;
	/* 	width: 271px !important; */
	max-width: 271px !important;
	min-width: 188px;
	font-size: 2.5rem;
	font-family: Saira;
	font-weight: 500;
	color: #FFFFFF;
	padding: 10px;
	background: rgba(0, 0, 0, 0.2);
	border: 2px solid;
	border-image: linear-gradient(0deg, #8488DC, #EE9B64) 2 2;
}

.container_box .nav_box #nav a {
	width: auto !important;
	margin-left: 0 !important;
}

.read-more {
	color: #000 !important;
}

.hero-box .inner-block {
	margin-top: auto;
	margin-bottom: 62px !important;
}

.inner-block span {
	/* 	width: 132px; */
	/* 	height: 11px; */
	font-size: 1.2rem;
	font-family: Saira;
	font-weight: 600;
	color: #FFFFFF;
	line-height: 26px;
	margin-left: 0;
}

/* @media (min-width: 768px){
	.inner-block h1 {
    width: 473px;
}
} */

.inner-block h1 {
	max-width: 473px;
	/* 	height: 89px; */
	/* 	font-size: 36px; */
	font-size: 2.3rem;
	font-family: Source Han Serif CN;
	font-weight: 400;
	color: #FFFFFF;
	line-height: 50px;
}

/* 横屏样式 */
.horizontal_box {
	width: 100%;
	/* 	display: flex; */
}

.horizontal_box:before {
	content: '';
	position: absolute;
	width: 100%;
	background: rgba(0, 0, 0, 0.8);
	height: 80px;
}

.horizontal_box .container_box {
	flex: 1;
	height: 80px;
	align-items: center;
}

.horizontal_box .container_box .logo {
	margin: 0;
}

.horizontal_box .container_box .show_menu {
	margin: 0;
}

.horizontal_box .container_box .nav_box {
	height: 100%;
}

.horizontal_box .container_box #nav {
	/* 	position: absolute; */
	/* 	margin-top: 80px; */
	/* 	padding-top: calc(30.1% - 80px); */
}

.nav_box #nav_horizontal {
	display: none;
}

.horizontal_box #nav_horizontal {
	display: flex;
}

#nav_horizontal {
	position: absolute;
	width: 100%;
	height: 80px;
	display: flex;
	align-items: center;
	justify-content: center;
	/* 	position: absolute;
 	left: 50%;
	transform: translate(-50%,0%); */
}

#nav_horizontal span {
	width: auto !important;
	margin: 0 20px;
	font-size: 16px;
	font-family: Saira;
	font-weight: 400;
	color: #FFFFFF;
	text-align: center;
	padding: 0 20px;
}

#nav_horizontal span:hover {
/* 	font-size: 18px; */
	border-bottom: 2px solid;
	border-image: linear-gradient(90deg, #8488DC, #EE9B64) 2 2;
}





<!-- 
   <?php

/**
 * The header for our theme
 *
 * This is the template that displays all of the <head> section and everything up until <div id="content">
 *
 * @link https://developer.wordpress.org/themes/basics/template-files/#template-partials
 *
 * @package indie
 */
$no_footer_header_pages = array('countdown', 'loading');
$the_post = get_queried_object();
$pagename = get_query_var('pagename') ? get_query_var('pagename') : null;
if (!$pagename && $the_post) {
	$pagename = ($the_post && property_exists($the_post, 'post_name') ? $the_post->post_name : '');
}
?>
<!doctype html>
<html <?php language_attributes(); ?>>

<head>
	<meta charset="<?php bloginfo('charset'); ?>">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="https://gmpg.org/xfn/11">

	<link rel="apple-touch-icon" sizes="76x76" href="<?php echo get_template_directory_uri() ?>/public/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="<?php echo get_template_directory_uri() ?>/public/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="<?php echo get_template_directory_uri() ?>/public/favicon-16x16.png">
	<link rel="manifest" href="<?php echo get_template_directory_uri() ?>/public/site.webmanifest">
	<link rel="mask-icon" href="<?php echo get_template_directory_uri() ?>/public/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#000000">
	<meta name="theme-color" content="#000000">


	<?php wp_head(); ?>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=Khula:wght@400;700&family=Saira:wght@400;600&display=swap" rel="stylesheet" />
	<!-- <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" /> -->
	<link href="//vjs.zencdn.net/7.10.2/video-js.min.css" rel="stylesheet">
	<script src="//vjs.zencdn.net/7.10.2/video.min.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
	<link rel="stylesheet" href="<?php echo get_template_directory_uri() ?>/css/systes.css" />
	<script type="text/javascript" src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
	<!-- Facebook Pixel Code -->
	<script>
		! function(f, b, e, v, n, t, s) {
			if (f.fbq) return;
			n = f.fbq = function() {
				n.callMethod ?
					n.callMethod.apply(n, arguments) : n.queue.push(arguments)
			};
			if (!f._fbq) f._fbq = n;
			n.push = n;
			n.loaded = !0;
			n.version = '2.0';
			n.queue = [];
			t = b.createElement(e);
			t.async = !0;
			t.src = v;
			s = b.getElementsByTagName(e)[0];
			s.parentNode.insertBefore(t, s)
		}(window, document, 'script',
			'https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '496240788361101');
		fbq('track', 'PageView');
	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-T4E3SGYK81"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'G-T4E3SGYK81');
	</script> -->
	<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=496240788361101&ev=PageView&noscript=1" /></noscript>
	<!-- End Facebook Pixel Code -->
	<script src="https://kit.fontawesome.com/f9e5428627.js" crossorigin="anonymous"></script>
	<script type="text/javascript">
		var series_active_index = 0;
	</script>
</head>

<body <?php body_class('body ' . (is_front_page() || is_home() ? 'loading' : '')); ?>>
	<script type="text/javascript">
		<?php if (is_front_page() || is_home()) : ?>
			var loading_shown = window.localStorage.getItem('loading_shown');
			if (loading_shown) {
				document.body.classList.remove("loading");
			}
		<?php endif; ?>
	</script>
	<?php wp_body_open(); ?>
	<div id="page" class="site wrapper">
		<!-- <a class="skip-link screen-reader-text" href="#primary"><?php esc_html_e('Skip to content', 'indie'); ?></a> -->
		<?php if (!in_array($pagename, $no_footer_header_pages)) : ?>
			<header class="header ">
				<div class="container">
					<a href="<?php echo get_site_url(); ?>/home" class="logo">
						<img src="<?php echo get_template_directory_uri() ?>/public/images/indi-logo.png" alt="indi" />
					</a>
					<div class='nav_box'>
						<div id="nav_horizontal"> 
                    <a href="<?php echo get_site_url(); ?>/home"><span style="width:170px;">You Do You</span></a>
                    <a href="<?php echo get_site_url(); ?>/pre-order/"><span style="width:170px;">Preorder</span></a>
                    <a href="<?php echo get_site_url(); ?>/a-futuristic-vision-for-car-owners/" ><span style="width:170px;">BIockchain</span></a>	
					</div>
					<div id="nav"> 
                    <a href="<?php echo get_site_url(); ?>/home"><span style="width:170px;">You Do You</span></a>
                    <a href="<?php echo get_site_url(); ?>/pre-order/"><span style="width:170px;">Preorder</span></a>
                    <a href="<?php echo get_site_url(); ?>/a-futuristic-vision-for-car-owners/" ><span style="width:170px;">BIockchain</span></a>	
					</div>
					</div>
					
					<a href="#" class="nav-opener">
						<img src="https://driveindi.com/wp-content/uploads/2022/01/icon-Nav.png" alt="description" style='width:24px;height:14px;'>
<!-- 						<i class="icon-Nav"></i> -->
					</a>
					<div class="nav-menu">
						<div class="top-box">
							<div class="container">
								<a href="<?php echo get_site_url(); ?>" class="logo">
									<img src="<?php echo get_template_directory_uri() ?>/public/images/indi-logo.png" alt="indi" />
								</a>
								<a href="#" class="nav-opener">
									<span>close</span>
								</a>
							</div>
						</div>
						<div class="container">
							<div class="nav-holder">
								<ul class="nav">
									<?php
									wp_nav_menu(array(
										'theme_location' => 'menu-1',
										'menu_id'        => 'primary-menu',
										'container'      => '', // Force menu to don't add a wrapper element
										// 'items_wrap'    => '%3$s', // Print only te li elements
									));
									?>
								</ul>
							</div>
							<ul class="nav-social">
								<?php
								$social_networks = get_field('global_social_networks', 'option');
								?>
								<?php if ($social_networks) : ?>
									<?php foreach ($social_networks as $social_network) : ?>
										<?php $icon = $social_network['icon']; ?>
										<?php $url = $social_network['url']; ?>
										<?php if ($icon === 'envelope') : ?>
											<li><a href="mailto:<?php echo $url; ?>" target="_blank"><i class="far fa-<?php echo $icon; ?>"></i></a></li>
										<?php else : ?>
											<li><a href="<?php echo $url; ?>" target="_blank"><i class="fab fa-<?php echo $icon; ?>"></i></a></li>
										<?php endif; ?>
									<?php endforeach; ?>
								<?php endif; ?>
							</ul>
							<ul class="nav-social-mobile">
								<?php
								$social_networks = get_field('global_social_networks', 'option');
								?>
								<?php if ($social_networks) : ?>
									<?php foreach ($social_networks as $social_network) : ?>
										<?php $icon = $social_network['icon']; ?>
										<?php $url = $social_network['url']; ?>
										<?php if ($icon === 'envelope') : ?>
											<li><a href="mailto:<?php echo $url; ?>" target="_blank"><i class="far fa-<?php echo $icon; ?>"></i></a></li>
										<?php else : ?>
											<li><a href="<?php echo $url; ?>" target="_blank"><i class="fab fa-<?php echo $icon; ?>"></i></a></li>
										<?php endif; ?>
									<?php endforeach; ?>
								<?php endif; ?>
							</ul>
							<!-- <form action="#" class="header-form">
								<input type="search" id="site-search" name="q" aria-label="Search through site content" placeholder="Search" />
								<button class="btn-search icon-search" type="submit">Search</button>
								<button class="btn-search-arrow icon-long-arrow-right" type="submit">Search</button>
							</form> -->
						</div>
					</div>
				</div>
			</header>
		<?php endif; ?>
		
		<script>
			(function($) {
				alert(111);
				orient();
				$(window).bind( 'orientationchange', function(e){
					orient();
				});
				function orient() {
					console.log(document.getElementsByClassName('header'));
					alert(window.orientation?window.orientation:'空');
					var node=document.getElementsByClassName('header');
					if (window.orientation === 180 || window.orientation === 0) {
						// 竖屏
						node[0].classList.remove("horizontal_box");
					};
					if (window.orientation === 90 || window.orientation === -90 ){
							// 横屏
						node[0].classList.add("horizontal_box");
					};
				};
			}(jQuery));

			

</script>
 -->



 <script type="text/javascript">
// 						onload等待页面加载完成页面会闪烁 影响用户体验 
// 			 window.onload=function(){
				 console.log('测试===1',window.location.href);
				// window.location.pathname： 返回URL的域名（域名IP）后的部分。
				 let url=window.location.pathname;
// 				 二级页面
				 if(url.split("/")[1].length>0){
// 					 顶部按钮显示
					 var node=document.getElementsByClassName('header');
					 node[0].classList.add("horizontal_box");
// 					 隐藏 按钮
					 document.getElementById('nav').style.display = 'none';
				 }else{
// 					 首页
				  var node=document.getElementsByClassName('header');
					 node[0].classList.remove("horizontal_box");
 					document.getElementById('nav').style.display = 'flex';
					  orient();
// 				 获取设备的方向变化
				 window.addEventListener('orientationchange', function(e){ orient()});
				 function orient() {
					
					var node=document.getElementsByClassName('header');
					if (window.orientation === 180 || window.orientation === 0) {
						// 竖屏
						node[0].classList.remove("horizontal_box");
					};
					if (window.orientation === 90 || window.orientation === -90 ){
							// 横屏
						node[0].classList.add("horizontal_box");
					};
				};
				 }
				
				
// 			 };
function test(){
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src= "https://www.picturemosaics.com/photo-mosaic-tool/js/widgetEmbed.js";
    document.body.appendChild(script);
    var div = document.createElement("div");
    div.id = "pictureMosaicsWidgetEmbed";
    div.style.width='100%';
    document.body.appendChild(div);
}
function testB(){
    var pmwFrame = new Pmwidgetframe({element: "pictureMosaicsWidgetEmbed", uid: "M6668616", pid: "p26", stor: "s6/v1"});
    pmwFrame.init();
    // document.getElementById('pmWidgetFrame-M6668616-p26').src= 'https://www.picturemosaics.com/photo-mosaic-tool/widgetIframe.php?id=M6668616&p=p26&stor=s6/v1';
     // document.getElementById('pmWidgetFrame-M6668616-p26').src= 'https://cdn.picturemosaics.com/client/iframe/omtEmbed.html?mos=bUlkPU02NjY4NjE2JnBJZD1wMjYmc1ZhbD1zNi92MQ=='

}
					</script>
                    <div class="form-bar">
		<?php echo do_shortcode($contact_form_shortcode); ?>
	</div>