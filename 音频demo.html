<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <audio id="audio" autoplay controls crossorigin="anonymous" src=""></audio>
</body>
<script>
    var arr = [{ "Type": 1002, "MsgContent": "111111111", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1639019395820, "UnreadMsgCount": 0, "ReadTimestamp": 1639019395821, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "5bfcdc99aa55498aa1c5da6be672c136", "MsgSenderName": "123", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group_5bfcdc99aa55498aa1c5da6be672c136_1636694918551.png", "Favorite": 0, "MemberCount": 6, "IMStatus": 1, "Id": "group_5bfcdc99aa55498aa1c5da6be672c136_1636694918551", "Name": "马晶晶,佩恩,123,黄夏宇,yhh,邢鑫", "isGroup": true, "ActiveTimestamp": 1639019395820, "id": "group_5bfcdc99aa55498aa1c5da6be672c136_1636694918551", "index": 0 }, { "Type": 1000, "MsgContent": "{\"b_ISINDENTITY\":false,\"chatRoomId\":\"group_5bfcdc99aa55498aa1c5da6be672c136_1636694918551\",\"message\":\"视频会议邀请\",\"n_TYPE\":10,\"type\":0,\"voiceMeetingType\":\"invite\",\"voiceRoomKey\":\"b54953da-6134-6604-a7ef-4fd12ad8dbd4\"}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1639018858363, "UnreadMsgCount": 0, "ReadTimestamp": 1639018858364, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "5bfcdc99aa55498aa1c5da6be672c136", "MsgSenderName": "123", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/man.png", "Favorite": 1, "MemberCount": 1, "IMStatus": 1, "Id": "5bfcdc99aa55498aa1c5da6be672c136", "Name": "123", "isGroup": false, "ActiveTimestamp": 1639018858363, "id": "5bfcdc99aa55498aa1c5da6be672c136", "index": 1 }, { "Type": 1000, "MsgContent": "{\"type\":0,\"msgId\":null,\"senderIp\":\"172.18.70.37\",\"senderPort\":10040,\"isSinglePicture\":0,\"totalLength\":75831720,\"thumbnail\":\"\",\"receiversProgress\":null,\"fileList\":[{\"Path\":\"CefSharp.zip\",\"ShowPath\":\"\",\"RefPath\":null,\"Size\":75831720,\"IsDirectory\":0}],\"n_TYPE\":9}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638954056322, "UnreadMsgCount": 0, "ReadTimestamp": 1638954056323, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "1130b4ea7eb74fd5b5b1f23994925ef5", "MsgSenderName": "吕小龙", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/1130b4ea7eb74fd5b5b1f23994925ef5.png", "Favorite": 1, "MemberCount": 1, "IMStatus": 1, "Id": "1130b4ea7eb74fd5b5b1f23994925ef5", "Name": "吕小龙", "isGroup": false, "ActiveTimestamp": 1638954056322, "id": "1130b4ea7eb74fd5b5b1f23994925ef5", "index": 2 }, { "Type": 1002, "MsgContent": "[偷笑]", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1638950365300, "UnreadMsgCount": 0, "ReadTimestamp": 1638950365301, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "55dd5af4b44849beb5cc5fc2d8e35adf", "MsgSenderName": "六道", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group_3ab70137a7b04c629460609b64229ca5_1615945445567.png", "Favorite": 0, "MemberCount": 18, "IMStatus": 1, "Id": "group_3ab70137a7b04c629460609b64229ca5_1615945445567", "Name": "视频会议测试小群", "isGroup": true, "ActiveTimestamp": 1638950365300, "id": "group_3ab70137a7b04c629460609b64229ca5_1615945445567", "index": 3 }, { "Type": 1000, "MsgContent": "{\"b_ISINDENTITY\":false,\"chatRoomId\":\"group_5bfcdc99aa55498aa1c5da6be672c136_1636694918551\",\"message\":\"视频会议邀请\",\"n_TYPE\":10,\"type\":0,\"voiceMeetingType\":\"invite\",\"voiceRoomKey\":\"2da15ec2-d134-6603-db0b-8b45f3c2c506\"}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638945354027, "UnreadMsgCount": 0, "ReadTimestamp": 1638945354027, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "f43245bd9824430b973fbf57320bb38b", "MsgSenderName": "邢鑫", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/9cdc4ff8da8b4b9987f5b806ce9a1a62.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "9cdc4ff8da8b4b9987f5b806ce9a1a62", "Name": "yhh", "isGroup": false, "ActiveTimestamp": 1638945354027, "id": "9cdc4ff8da8b4b9987f5b806ce9a1a62", "index": 4 }, { "Type": 1002, "MsgContent": "可能都没看到", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1638944343133, "UnreadMsgCount": 0, "ReadTimestamp": 1638944343134, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "a2f4113338d2472786115b723e122fba", "MsgSenderName": "肖家良", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group_1130b4ea7eb74fd5b5b1f23994925ef5_1615958478268.png", "Favorite": 0, "MemberCount": 11, "IMStatus": 1, "Id": "group_1130b4ea7eb74fd5b5b1f23994925ef5_1615958478268", "Name": "福利、惩戒", "isGroup": true, "ActiveTimestamp": 1638944343133, "id": "group_1130b4ea7eb74fd5b5b1f23994925ef5_1615958478268", "index": 5 }, { "Type": 1002, "MsgContent": "1", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1638932715940, "UnreadMsgCount": 0, "ReadTimestamp": 1638932715941, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "e3cc35befbcc4cb3965eacdf98d12cad", "MsgSenderName": "谢九龙", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group_1130b4ea7eb74fd5b5b1f23994925ef5_1615253903620.png", "Favorite": 0, "MemberCount": 16, "IMStatus": 1, "Id": "group_1130b4ea7eb74fd5b5b1f23994925ef5_1615253903620", "Name": "静静办公开发组", "isGroup": true, "ActiveTimestamp": 1638932715940, "id": "group_1130b4ea7eb74fd5b5b1f23994925ef5_1615253903620", "index": 6 }, { "Type": 1000, "MsgContent": "{\"type\":0,\"msgId\":null,\"senderIp\":\"172.18.70.41\",\"senderPort\":10040,\"isSinglePicture\":0,\"totalLength\":54833334,\"thumbnail\":\"\",\"receiversProgress\":null,\"fileList\":[{\"Path\":\"JJ_2.18_jj_20211208.apk\",\"ShowPath\":\"\",\"RefPath\":null,\"Size\":54833334,\"IsDirectory\":0}],\"n_TYPE\":9}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638930660296, "UnreadMsgCount": 0, "ReadTimestamp": 1638930660297, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "5c9c4c3a3f604796b53c4ff1039ba4a1", "MsgSenderName": "黄夏宇", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/5c9c4c3a3f604796b53c4ff1039ba4a1.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "5c9c4c3a3f604796b53c4ff1039ba4a1", "Name": "黄夏宇", "isGroup": false, "ActiveTimestamp": 1638930660296, "id": "5c9c4c3a3f604796b53c4ff1039ba4a1", "index": 7 }, { "Type": 1000, "MsgContent": "", "MsgType": 4, "MsgStatus": 1, "MsgTimestamp": 1638864160063, "UnreadMsgCount": 0, "ReadTimestamp": 1638864160064, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "d7b9ae1297e142ffb64be64ba7d8dae7", "MsgSenderName": "陈甸甸", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/d7b9ae1297e142ffb64be64ba7d8dae7.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "d7b9ae1297e142ffb64be64ba7d8dae7", "Name": "陈甸甸", "isGroup": false, "ActiveTimestamp": 1638864160063, "id": "d7b9ae1297e142ffb64be64ba7d8dae7", "index": 8 }, { "Type": 1000, "MsgContent": "青云 那两个接口叫什么的？", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1638863630679, "UnreadMsgCount": 0, "ReadTimestamp": 1638863630679, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "f43245bd9824430b973fbf57320bb38b", "MsgSenderName": "邢鑫", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/8c0f2a0f9e1d49f59fde5092fa7cff9d.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "8c0f2a0f9e1d49f59fde5092fa7cff9d", "Name": "陈青云", "isGroup": false, "ActiveTimestamp": 1638863630679, "id": "8c0f2a0f9e1d49f59fde5092fa7cff9d", "index": 9 }, { "Type": 1000, "MsgContent": "", "MsgType": 4, "MsgStatus": 1, "MsgTimestamp": 1638758181589, "UnreadMsgCount": 0, "ReadTimestamp": 1638758181589, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "f43245bd9824430b973fbf57320bb38b", "MsgSenderName": "邢鑫", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/d6de88cdd0be414ba9b4c44269c4de25.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "d6de88cdd0be414ba9b4c44269c4de25", "Name": "严辉昊", "isGroup": false, "ActiveTimestamp": 1638758181589, "id": "d6de88cdd0be414ba9b4c44269c4de25", "index": 10 }, { "Type": 1000, "MsgContent": "{\"n_TYPE\":1,\"s_CONTENTS\":\"经过长时间的开发、测试，目前静静办公APP的视频会议功能已趋于稳定，现邀请有视频会议需求的小伙伴使用。最新版本支持共享屏幕功能，方便大家在视频会议过程中更好的沟通、演示，使用过程中遇到任何问题请联系吕小龙处理。\\n\\n视频会议使用方法：进入聊天界面点击右下角的“+”图标，选择“视频会议”即可。\\n共享屏幕使用方法：进入视频会议界面，点击右下角的“展开更多”图标，选择“共享屏幕”即可。\",\"s_ENT_ID\":\"ff808081581b3e2801581b47dd4e0000\",\"s_ENT_LOGO\":\"\",\"s_ENT_NAME\":\"蜗牛游戏\",\"s_TITLE\":\"静静办公邀请你使用视频会议功能\"}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638753823782, "UnreadMsgCount": 0, "ReadTimestamp": 1638754961698, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "b_bfcf4a5dab1e46c29442e635298667a4", "MsgSenderName": "广播消息", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/man.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "b_bfcf4a5dab1e46c29442e635298667a4", "Name": "广播消息", "isGroup": false, "ActiveTimestamp": 1638753823782, "id": "b_bfcf4a5dab1e46c29442e635298667a4", "index": 11 }, { "Type": 1000, "MsgContent": "{\"b_ISINDENTITY\":false,\"chatRoomId\":\"f43245bd9824430b973fbf57320bb38b\",\"message\":\"\",\"n_TYPE\":10,\"optionType\":0,\"type\":0,\"voiceMeetingType\":\"refuse\",\"voiceRoomKey\":\"d4fa5298-a134-6604-c901-32c762ed2878\"}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638514626418, "UnreadMsgCount": 0, "ReadTimestamp": 1638514626419, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "1723f0b4ad7b4d39a1b5bc8d43501b78", "MsgSenderName": "马晶晶", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/woman.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "1723f0b4ad7b4d39a1b5bc8d43501b78", "Name": "马晶晶", "isGroup": false, "ActiveTimestamp": 1638514626418, "id": "1723f0b4ad7b4d39a1b5bc8d43501b78", "index": 12 }, { "Type": 1002, "MsgContent": "{\"b_ISINDENTITY\":false,\"chatRoomId\":\"group_1130b4ea7eb74fd5b5b1f23994925ef5_1638498267723\",\"message\":\"视频会议已结束\",\"n_TYPE\":10,\"optionType\":0,\"type\":0,\"voiceMeetingType\":\"destroy\",\"voiceRoomKey\":\"697331452\"}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638500343446, "UnreadMsgCount": 0, "ReadTimestamp": 1638500343447, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "5bfcdc99aa55498aa1c5da6be672c136", "MsgSenderName": "123", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group.png", "Favorite": 0, "MemberCount": 0, "IMStatus": 1, "Id": "group_1130b4ea7eb74fd5b5b1f23994925ef5_1638498267723", "Name": "", "isGroup": true, "ActiveTimestamp": 1638500343446, "id": "group_1130b4ea7eb74fd5b5b1f23994925ef5_1638498267723", "index": 13 }, { "Type": 1000, "MsgContent": "js.zip", "MsgType": 3, "MsgStatus": 1, "MsgTimestamp": 1638498889807, "UnreadMsgCount": 0, "ReadTimestamp": 0, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "f43245bd9824430b973fbf57320bb38b", "MsgSenderName": "邢鑫", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/man.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "f43245bd9824430b973fbf57320bb38b", "Name": "邢鑫", "isGroup": false, "ActiveTimestamp": 1638498889807, "id": "f43245bd9824430b973fbf57320bb38b", "index": 14 }, { "Type": 1002, "MsgContent": "{\"b_ISINDENTITY\":false,\"chatRoomId\":\"group_9cdc4ff8da8b4b9987f5b806ce9a1a62_1630459978474\",\"message\":\"视频会议邀请\",\"n_TYPE\":10,\"type\":0,\"voiceMeetingType\":\"invite\",\"voiceRoomKey\":\"2bf91e2e-1134-6603-da37-7dc9267b7828\"}", "MsgType": 10, "MsgStatus": 1, "MsgTimestamp": 1638340210659, "UnreadMsgCount": 0, "ReadTimestamp": 1638340210660, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "5bfcdc99aa55498aa1c5da6be672c136", "MsgSenderName": "123", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group_9cdc4ff8da8b4b9987f5b806ce9a1a62_1630459978474.png", "Favorite": 0, "MemberCount": 3, "IMStatus": 1, "Id": "group_9cdc4ff8da8b4b9987f5b806ce9a1a62_1630459978474", "Name": "123,yhh,邢鑫", "isGroup": true, "ActiveTimestamp": 1638340210659, "id": "group_9cdc4ff8da8b4b9987f5b806ce9a1a62_1630459978474", "index": 15 }, { "Type": 1000, "MsgContent": "index地址：172.18.70.30:24002  版本号：111111", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1638339581822, "UnreadMsgCount": 0, "ReadTimestamp": 1638339581823, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "a2f4113338d2472786115b723e122fba", "MsgSenderName": "肖家良", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/man.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "a2f4113338d2472786115b723e122fba", "Name": "肖家良", "isGroup": false, "ActiveTimestamp": 1638339581822, "id": "a2f4113338d2472786115b723e122fba", "index": 16 }, { "Type": 1000, "MsgContent": "你那个排序算法 是怎么写的 我看一下", "MsgType": 0, "MsgStatus": 1, "MsgTimestamp": 1637915047781, "UnreadMsgCount": 0, "ReadTimestamp": 1637915047781, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "f43245bd9824430b973fbf57320bb38b", "MsgSenderName": "邢鑫", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/man.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "3ab70137a7b04c629460609b64229ca5", "Name": "谢士全", "isGroup": false, "ActiveTimestamp": 1637915047781, "id": "3ab70137a7b04c629460609b64229ca5", "index": 17 }, { "Type": 1000, "MsgContent": "STUN-2.pcapng", "MsgType": 3, "MsgStatus": 1, "MsgTimestamp": 1635933561713, "UnreadMsgCount": 0, "ReadTimestamp": 1635933561713, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "f43245bd9824430b973fbf57320bb38b", "MsgSenderName": "邢鑫", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/e3cc35befbcc4cb3965eacdf98d12cad.png", "Favorite": 0, "MemberCount": 1, "IMStatus": 1, "Id": "e3cc35befbcc4cb3965eacdf98d12cad", "Name": "谢九龙", "isGroup": false, "ActiveTimestamp": 1635933561713, "id": "e3cc35befbcc4cb3965eacdf98d12cad", "index": 18 }, { "Type": 1002, "MsgContent": "", "MsgType": 4, "MsgStatus": 1, "MsgTimestamp": 1635909176952, "UnreadMsgCount": 0, "ReadTimestamp": 1635909176953, "Sticky": 0, "Undisturbed": 0, "MsgSenderId": "a2f4113338d2472786115b723e122fba", "MsgSenderName": "肖家良", "AtMeTimestamp": 0, "IsEncryption": 0, "Avatar": "D:/JJ/JJ/img/HeadImg/group_82d6cfb16c274461a59518d2b358346e_1618988560462.png", "Favorite": 0, "MemberCount": 32, "IMStatus": 1, "Id": "group_82d6cfb16c274461a59518d2b358346e_1618988560462", "Name": "IT中心", "isGroup": true, "ActiveTimestamp": 1635909176952, "id": "group_82d6cfb16c274461a59518d2b358346e_1618988560462", "index": 19 }];
    window.onload = () => {
        // arr.sort(OnsortKey)
        // OnsortKey(arr)
        console.log(arr);
        // setCustomizeFu(arr);
    };
    function isJSON(str) {
        if (typeof str == 'string') {
            try {
                var obj = JSON.parse(str);
                if (typeof obj == 'object' && obj) {
                    return true;
                } else {
                    return false;
                }

            } catch (e) {
                console.log('error：' + str + '!!!' + e);
                return false;
            }
        }
        console.log('It is not a string!')
    }
    // 自己写的 排序
    function setCustomizeFu(arr) {
        for (let i in arr) {
            var k = Number(i) + 1;
            if(arr[k] == undefined){
                return arr;
            }
            // for (k in arr) {
                if (arr[i].Id.indexOf('group_') >= 0 || (arr[i].MsgType == 10 &&  isJSON(arr[i].MsgContent) && JSON.parse(arr[i].MsgContent).chatRoomId != undefined && JSON.parse(arr[i].MsgContent).chatRoomId.indexOf('group_') >= 0)) {
                    if (arr[k].Id.indexOf('group_') >= 0 || (arr[k].MsgType == 10 &&  isJSON(arr[k].MsgContent) && JSON.parse(arr[k].MsgContent).chatRoomId != undefined && JSON.parse(arr[k].MsgContent).chatRoomId.indexOf('group_') >= 0)) {
                        if (arr[i].Id == arr[k].Id || ( isJSON(arr[k].MsgContent) && JSON.parse(arr[k].MsgContent).chatRoomId != undefined && arr[i].Id == JSON.parse(arr[k].MsgContent).chatRoomId) || ( isJSON(arr[i].MsgContent) &&JSON.parse(arr[i].MsgContent).chatRoomId != undefined && JSON.parse(arr[i].MsgContent).chatRoomId == arr[k].Id) || ( isJSON(arr[k].MsgContent) && JSON.parse(arr[k].MsgContent).chatRoomId != undefined &&  isJSON(arr[i].MsgContent) && JSON.parse(arr[i].MsgContent).chatRoomId != undefined &&JSON.parse(arr[i].MsgContent).chatRoomId == JSON.parse(arr[k].MsgContent).chatRoomId)) {
                            if (arr[i].ActiveTimestamp > arr[k].ActiveTimestamp) {
                                if(JSON.parse(arr[i].MsgContent).chatRoomId.indexOf('group_') >= 0){
                                    arr[i].Id=JSON.parse(arr[i].MsgContent).chatRoomId;
                                    arr[i].id=JSON.parse(arr[i].MsgContent).chatRoomId;

                                }
                                arr.splice(k, 1);
                            } else {
                                if(JSON.parse(arr[k].MsgContent).chatRoomId.indexOf('group_') >= 0){
                                    arr[k].Id=JSON.parse(arr[k].MsgContent).chatRoomId;
                                    arr[k].id=JSON.parse(arr[ki].MsgContent).chatRoomId;

                                }
                                arr.splice(i, 1);
                            }
                        }
                    }

                }
            // }
        }
        return arr;
    }

// function OnsortKey(a,b){
//      console.log(a,b)
// }

</script>

</html>