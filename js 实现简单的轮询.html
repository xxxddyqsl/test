<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>js 实现简单的轮询</title>
</head>

<body>
    <button onclick="setTimer()">js 实现简单的轮询</button>
</body>
<script type="text/JavaScript">
       var a = 0; var b = 9; 
    function setTimer() {
        let timer; 
       if (a < b) {a+=1;
            console.log(a);
            timer = setInterval(() => {
                this.setTimer()
            }, 200)
        } else {
            clearTimeout(timer) //清理定时任务
        }

    }; 
    // set_time('1632732049')
    // uinx时间戳
    let time=parseInt(new Date().getTime()/1000);
    //  第2种parseInt(new Date().getTime()) 
    set_time(time);
    // 如何js比较两个时间戳是否相差5分钟
    // Math.abs(1632732013  - 1632732017) >= (5 * 60 * 1000)
    // uinx时间戳 比较两个时间戳
    //  Math.abs(time1 - time2) >= (5 * 60 )
function set_time(str){
    // 获取时间戳
    // parseInt(new Date().getTime()/1000)
    // 看在获取时间戳的时候有没有 /1000 如： 第一种parseInt(new Date().getTime()/1000)   第2种parseInt(new Date().getTime()) 
    //如果是uinx时间戳记得乘于1000
//   var n = parseInt(str)*1000;
  var n = parseInt(str);
  var D = new Date(n);
  var year = D.getFullYear();//四位数年份

  var month = D.getMonth()+1;//月份(0-11),0为一月份
  month = month<10?('0'+month):month;

  var day = D.getDate();//月的某一天(1-31)
  day = day<10?('0'+day):day;

  var hours = D.getHours();//小时(0-23)
  hours = hours<10?('0'+hours):hours;

  var minutes = D.getMinutes();//分钟(0-59)
  minutes = minutes<10?('0'+minutes):minutes;

  // var seconds = D.getSeconds();//秒(0-59)
  // seconds = seconds<10?('0'+seconds):seconds;
  // var week = D.getDay();//周几(0-6),0为周日
  // var weekArr = ['周日','周一','周二','周三','周四','周五','周六'];

  var now_time = year+'-'+month+'-'+day+' '+hours+':'+minutes;
  return now_time;
};
    </script>

</html>